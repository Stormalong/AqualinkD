/*
 * Copyright (c) 2017 Shaun Feakes - All rights reserved
 *
 * You may use redistribute and/or modify this code under the terms of
 * the GNU General Public License version 2 as published by the
 * Free Software Foundation. For the terms of this license,
 * see <http://www.gnu.org/licenses/>.
 *
 * You are free to use this software under the terms of the GNU General
 * Public License, but WITHOUT ANY WARRANTY; without even the implied
 * warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
 * See the GNU General Public License for more details.
 *
 *  https://github.com/sfeakes/aqualinkd
 */

#include <stdio.h>
#include <string.h>
#include <stdlib.h>

#include "aq_serial.h"
#include "aqualink.h"
#include "packetLogger.h"
#include "aq_serial.h"
#include "serialadapter.h"

bool process_iaqualink_packet(unsigned char *packet, int length, struct aqualinkdata *aq_data)
{

  // debuglogPacket(IAQL_LOG, packet, length, true, true);

  return true;
}

// This is onle here temporarly until we figure out the protocol.
void send_iaqualink_ack(int rs_fd, unsigned char *packet_buffer)
{
  /*
        Probe | HEX: 0x10|0x02|0xa3|0x00|0xb5|0x10|0x03|
          Ack | HEX: 0x10|0x02|0x00|0x01|0x00|0x00|0x13|0x10|0x03|
       Unknown '0x61' | HEX: 0x10|0x02|0xa3|0x61|0x00|0x00|0x00|0x04|0x00|0x27|0x41|0x10|0x03|
                  Ack | HEX: 0x10|0x02|0x00|0x01|0x61|0x00|0x74|0x10|0x03|
       Unknown '0x50' | HEX: 0x10|0x02|0xa3|0x50|0x20|0x20|0x20|0x20|0x20|0x20|0x20|0x20|0x20|0x00|0x25|0x10|0x03|
                  Ack | HEX: 0x10|0x02|0x00|0x01|0x50|0x00|0x63|0x10|0x03|
       Unknown '0x51' | HEX: 0x10|0x02|0xa3|0x51|0x00|0x06|0x10|0x03|
                  Ack | HEX: 0x10|0x02|0x00|0x01|0x51|0x00|0x64|0x10|0x03|
       Unknown '0x59' | HEX: 0x10|0x02|0xa3|0x59|0x00|0x0e|0x10|0x03|
                  Ack | HEX: 0x10|0x02|0x00|0x01|0x59|0x00|0x6c|0x10|0x03|
       Unknown '0x52' | HEX: 0x10|0x02|0xa3|0x52|0x00|0x07|0x10|0x03|
                  Ack | HEX: 0x10|0x02|0x00|0x01|0x52|0x00|0x65|0x10|0x03|
       Unknown '0x53' | HEX: 0x10|0x02|0xa3|0x53|0x08|0x10|0x03|
                  Ack | HEX: 0x10|0x02|0x00|0x01|0x3f|0x00|0x52|0x10|0x03|
        Use byte 3 as return ack, except for 0x53=0x3f
        */
  if (packet_buffer[PKT_CMD] == CMD_PROBE) {
    LOG(IAQL_LOG,LOG_NOTICE, "Got probe on '0x%02hhx' 2nd iAqualink Protocol\n",packet_buffer[PKT_DEST]);
    send_extended_ack(rs_fd, packet_buffer[PKT_CMD], 0x00);
  } 
  else if (packet_buffer[PKT_CMD] == 0x53)
  {
    static int cnt = 0;
    /*
    if (cnt == 10)
    {
      cnt = 5;
      LOG(IAQL_LOG, LOG_NOTICE, "Sent accept pButton\n");
      send_extended_ack(rs_fd, 0x3f, 0x20);
    }*/
    if (cnt++ > 20)
    {
      cnt = 0;
      LOG(IAQL_LOG, LOG_NOTICE, "Sending get bigass packet\n");
      send_extended_ack(rs_fd, 0x3f, 0x18);
    }
    else
    {
      // Use 0x3f
      send_extended_ack(rs_fd, 0x3f, 0x00);
    }
    //send_jandy_command(rs_fd, get_rssa_cmd(packet_buffer[PKT_CMD]), 4);
  }
  else if (packet_buffer[PKT_CMD] == 0x73)
  {
    static int id=33;
    // unsigned char pb1[] = {PCOL_JANDY,0x10,0x02,0x00,0x24,0x73,0x01,0x18,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xc2,0x10,0x03,0x00};
    // unsigned char pb2[] = {PCOL_JANDY,0x10,0x02,0x00,0x24,0x73,0x01,0x21,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xcb,0x10,0x03,0x00};
    // 0x21 turns on filter_pump and aux 1
    unsigned char pb3[] = {0x00, 0x24, 0x73, 0x01, 0x21, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00};

    
    pb3[4] = id++;

    LOG(IAQL_LOG, LOG_NOTICE, "Sent pButton dec=%d hex=0x%02hhx\n",pb3[4],pb3[4]);
    // send_packet(rs_fd, pb2, 25);
    send_jandy_command(rs_fd, pb3, 19);
  }
  else
  {
    // Use packet_buffer[PKT_CMD]
    send_extended_ack(rs_fd, packet_buffer[PKT_CMD], 0x00);
  }
}

/*

Send command 0x18 to 0xa1 returns below to 0x31.  Looks like status

Filter pump does not effect the below.
Heater on/off does not effect below.
HEater setpoints does not effect.
Only Aux on/off seem to effect the status.

4th bit tells you where to start, 
  after start 4 bits are status
  last bit of status tell you chars in label.
  after label repeat start 4 bits.

For Aux1 10th bit 0=off 1=on 11 to 14  15 to 19=name
    Aux2 19th
    Aux3 28
    Aux4 37

In Below Aux 3 color light / Aux 4 dimmer / Aux 5 color light (different type to aux3)

Aux 1 off / Aux 3 on
  HEX: 0x10|0x02|0x31|0x72|0x05|0x01|0x02|0x03|0x04|0x05|0x00|0x01|0x00|0x00|0x04|0x41|0x75|0x78|0x31|0x01|0x01|0x00|0x00|0x04|0x41|0x75|0x78|0x32|0x01|0x07|0x02|0x03|0x04|0x41|0x75|0x78|0x33|0x00|0x01|0x01|0x00|0x04|0x41|0x75|0x78|0x34|0x00|0x01|0x00|0x00|0x04|0x41|0x75|0x78|0x35|0xd5|0x10|0x03|
Dec   |  16|   2|  49| 114|   5|   1|   2|   3|   4|   5|   0|   1|   0|   0|   4|  65| 117| 120|  49|   1|   1|   0|   0|   4|  65| 117| 120|  50|   1|   7|   2|   3|   4|  65| 117| 120|  51|   0|   1|   1|   0|   4|  65| 117| 120|  52|   0|   1|   0|   0|   4|  65| 117| 120|  53| 213|  16|   3
Ascii |    |    |   1|   r|    |    |    |    |    |    |    |    |    |    |    |   A|   u|   x|   1|    |    |    |    |    |   A|   u|   x|   2|    |    |    |    |    |   A|   u|   x|   3|    |    |    |    |    |   A|   u|   x|   4|    |    |    |    |    |   A|   u|   x|   5|    |    |

Aux 1 on / Aux 3 on
| HEX: 0x10|0x02|0x31|0x72|0x05|0x01|0x02|0x03|0x04|0x05|0x01|0x01|0x00|0x00|0x04|0x41|0x75|0x78|0x31|0x01|0x01|0x00|0x00|0x04|0x41|0x75|0x78|0x32|0x01|0x07|0x02|0x03|0x04|0x41|0x75|0x78|0x33|0x00|0x01|0x01|0x00|0x04|0x41|0x75|0x78|0x34|0x00|0x01|0x00|0x00|0x04|0x41|0x75|0x78|0x35|0xd6|0x10|0x03|
Dec   |  16|   2|  49| 114|   5|   1|   2|   3|   4|   5|   1|   1|   0|   0|   4|  65| 117| 120|  49|   1|   1|   0|   0|   4|  65| 117| 120|  50|   1|   7|   2|   3|   4|  65| 117| 120|  51|   0|   1|   1|   0|   4|  65| 117| 120|  52|   0|   1|   0|   0|   4|  65| 117| 120|  53| 214|  16|   3
Ascii |    |    |   1|   r|    |    |    |    |    |    |    |    |    |    |    |   A|   u|   x|   1|    |    |    |    |    |   A|   u|   x|   2|    |    |    |    |    |   A|   u|   x|   3|    |    |    |    |    |   A|   u|   x|   4|    |    |    |    |    |   A|   u|   x|   5|    |    |

Aux 1 off Aux3 to different light color
Hex   |0x10|0x02|0x31|0x72|0x05|0x01|0x02|0x03|0x04|0x05|0x00|0x01|0x00|0x00|0x04|0x41|0x75|0x78|0x31|0x01|0x01|0x00|0x00|0x04|0x41|0x75|0x78|0x32|0x00|0x07|0x02|0x03|0x04|0x41|0x75|0x78|0x33|0x00|0x01|0x01|0x00|0x04|0x41|0x75|0x78|0x34|0x00|0x01|0x00|0x00|0x04|0x41|0x75|0x78|0x35|0xd4|0x10|0x03|
Dec   |  16|   2|  49| 114|   5|   1|   2|   3|   4|   5|   0|   1|   0|   0|   4|  65| 117| 120|  49|   1|   1|   0|   0|   4|  65| 117| 120|  50|   0|   7|   2|   3|   4|  65| 117| 120|  51|   0|   1|   1|   0|   4|  65| 117| 120|  52|   0|   1|   0|   0|   4|  65| 117| 120|  53| 212|  16|   3
Ascii |    |    |   1|   r|    |    |    |    |    |    |    |    |    |    |    |   A|   u|   x|   1|    |    |    |    |    |   A|   u|   x|   2|    |    |    |    |    |   A|   u|   x|   3|    |    |    |    |    |   A|   u|   x|   4|    |    |    |    |    |   A|   u|   x|   5|    |    |



RS16 panel.
  HEX: 0x10|0x02|0x31|0x72|0x0f|0x01|0x02|0x03|0x04|0x05|0x06|0x07|0x08|0x09|0x0a|0x0b|0x0c|0x0d|0x0e|0x0f|0x00|0x01|0x00|0x00|0x04|0x41|0x75|0x78|0x31|0x01|0x01|0x00|0x00|0x04|0x41|0x75|0x78|0x32|0x01|0x01|0x00|0x00|0x04|0x41|0x75|0x78|0x33|0x01|0x01|0x00|0x00|0x04|0x41|0x75|0x78|0x34|0x01|0x01|0x00|0x00|0x04|0x41|0x75|0x78|0x35|0x01|0x01|0x00|0x00|0x04|0x41|0x75|0x78|0x36|0x01|0x01|0x00|0x00|0x04|0x41|0x75|0x78|0x37|0x01|0x01|0x00|0x00|0x06|0x41|0x75|0x78|0x20|0x42|0x31|0x01|0x01|0x00|0x00|0x06|0x41|0x75|0x78|0x20|0x42|0x32|0x01|0x01|0x00|0x00|0x06|0x41|0x75|0x78|0x20|0x42|0x33|0x01|0x01|0x00|0x00|0x06|0x41|0x75|0x78|0x20|0x42|0x34|0x01|0x01|0x00|0x00|0x06|0x41|0x75|0x78|0x20|0x42|0x35|0x01|0x01|0x00|0x00|0x06|0x41|0x75|0x78|0x20|0x42|0x36|0x01|0x01|0x00|0x00|0x06|0x41|0x75|0x78|0x20|0x42|0x37|0x01|0x01|0x00|0x00|0x06|0x41|0x75|0x78|0x20|0x42|0x38|0x77|0x10|0x03| 
Dec   |  16|   2|  49| 114|  15|   1|   2|   3|   4|   5|   6|   7|   8|   9|  10|  11|  12|  13|  14|  15|   0|   1|   0|   0|   4|  65| 117| 120|  49|   1|   1|   0|   0|   4|  65| 117| 120|  50|   1|   1|   0|   0|   4|  65| 117| 120|  51|   1|   1|   0|   0|   4|  65| 117| 120|  52|   1|   1|   0|   0|   4|  65| 117| 120|  53|   1|   1|   0|   0|   4|  65| 117| 120|  54|   1|   1|   0|   0|   4|  65| 117| 120|  55|   1|   1|   0|   0|   6|  65| 117| 120|  32|  66|  49|   1|   1|   0|   0|   6|  65| 117| 120|  32|  66|  50|   1|   1|   0|   0|   6|  65| 117| 120|  32|  66|  51|   1|   1|   0|   0|   6|  65| 117| 120|  32|  66|  52|   1|   1|   0|   0|   6|  65| 117| 120|  32|  66|  53|   1|   1|   0|   0|   6|  65| 117| 120|  32|  66|  54|   1|   1|   0|   0|   6|  65| 117| 120|  32|  66|  55|   1|   1|   0|   0|   6|  65| 117| 120|  32|  66|  56| 119|  16|   3
Ascii |    |    |   1|   r|    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |   A|   u|   x|   1|    |    |    |    |    |   A|   u|   x|   2|    |    |    |    |    |   A|   u|   x|   3|    |    |    |    |    |   A|   u|   x|   4|    |    |    |    |    |   A|   u|   x|   5|    |    |    |    |    |   A|   u|   x|   6|    |    |    |    |    |   A|   u|   x|   7|    |    |    |    |    |   A|   u|   x|    |   B|   1|    |    |    |    |    |   A|   u|   x|    |   B|   2|    |    |    |    |    |   A|   u|   x|    |   B|   3|    |    |    |    |    |   A|   u|   x|    |   B|   4|    |    |    |    |    |   A|   u|   x|    |   B|   5|    |    |    |    |    |   A|   u|   x|    |   B|   6|    |    |    |    |    |   A|   u|   x|    |   B|   7|    |    |    |    |    |   A|   u|   x|    |   B|   8|   w|    |    

Hex   |0x10|0x02|0x31|0x72|

*/

/* Startup sequences

RS16 combo
Debug:   RS Serial: Read  Jandy   packet To 0xa1 of type            Probe | HEX: 0x10|0x02|0xa1|0x00|0xb3|0x10|0x03| 
Debug:   RS Serial: Write Jandy   packet To 0x00 of type              Ack | HEX: 0x10|0x02|0x00|0x01|0x00|0x00|0x13|0x10|0x03| 
Debug:   RS Serial: Read  Jandy   packet To 0xa1 of type   Unknown '0x61' | HEX: 0x10|0x02|0xa1|0x61|0x00|0x00|0x00|0x01|0x00|0x1d|0x32|0x10|0x03| 
Debug:   RS Serial: Write Jandy   packet To 0x00 of type              Ack | HEX: 0x10|0x02|0x00|0x01|0x61|0x00|0x74|0x10|0x03| 
Debug:   RS Serial: Read  Jandy   packet To 0xa1 of type   Unknown '0x50' | HEX: 0x10|0x02|0xa1|0x50|0x20|0x20|0x20|0x20|0x20|0x20|0x20|0x20|0x20|0x00|0x23|0x10|0x03| 
Debug:   RS Serial: Write Jandy   packet To 0x00 of type              Ack | HEX: 0x10|0x02|0x00|0x01|0x50|0x00|0x63|0x10|0x03| 
Debug:   RS Serial: Read  Jandy   packet To 0xa1 of type   Unknown '0x51' | HEX: 0x10|0x02|0xa1|0x51|0x31|0x42|0x41|0x36|0x32|0x38|0x32|0x35|0x42|0x37|0x43|0x36|0x39|0x41|0x34|0x43|0x00|0xa2|0x10|0x03| 
Debug:   RS Serial: Write Jandy   packet To 0x00 of type              Ack | HEX: 0x10|0x02|0x00|0x01|0x51|0x00|0x64|0x10|0x03| 
Debug:   RS Serial: Read  Jandy   packet To 0xa1 of type   Unknown '0x59' | HEX: 0x10|0x02|0xa1|0x59|0x00|0x0c|0x10|0x03| 
Debug:   RS Serial: Write Jandy   packet To 0x00 of type              Ack | HEX: 0x10|0x02|0x00|0x01|0x59|0x00|0x6c|0x10|0x03| 
Debug:   RS Serial: Read  Jandy   packet To 0xa1 of type   Unknown '0x52' | HEX: 0x10|0x02|0xa1|0x52|0x00|0x05|0x10|0x03| 
Debug:   RS Serial: Write Jandy   packet To 0x00 of type              Ack | HEX: 0x10|0x02|0x00|0x01|0x52|0x00|0x65|0x10|0x03| 
Debug:   RS Serial: Read  Jandy   packet To 0xa1 of type     iAqalnk Poll | HEX: 0x10|0x02|0xa1|0x53|0x06|0x10|0x03|

RS8 Combo rev T.2
Debug:   RS Serial: Read  Jandy   packet To 0xa1 of type            Probe | HEX: 0x10|0x02|0xa1|0x00|0xb3|0x10|0x03| 
Debug:   RS Serial: Write Jandy   packet To 0x00 of type              Ack | HEX: 0x10|0x02|0x00|0x01|0x00|0x00|0x13|0x10|0x03| 
Debug:   RS Serial: Read  Jandy   packet To 0xa1 of type   Unknown '0x61' | HEX: 0x10|0x02|0xa1|0x61|0x00|0x00|0x00|0x01|0x00|0x1d|0x32|0x10|0x03| 
Debug:   RS Serial: Write Jandy   packet To 0x00 of type              Ack | HEX: 0x10|0x02|0x00|0x01|0x61|0x00|0x74|0x10|0x03| 
Debug:   RS Serial: Read  Jandy   packet To 0xa1 of type   Unknown '0x50' | HEX: 0x10|0x02|0xa1|0x50|0x20|0x20|0x20|0x20|0x20|0x20|0x20|0x20|0x20|0x00|0x23|0x10|0x03| 
Debug:   RS Serial: Write Jandy   packet To 0x00 of type              Ack | HEX: 0x10|0x02|0x00|0x01|0x50|0x00|0x63|0x10|0x03| 
Debug:   RS Serial: Read  Jandy   packet To 0xa1 of type   Unknown '0x51' | HEX: 0x10|0x02|0xa1|0x51|0x31|0x42|0x41|0x36|0x32|0x38|0x32|0x35|0x42|0x37|0x43|0x36|0x39|0x41|0x34|0x43|0x00|0xa2|0x10|0x03| 
Debug:   RS Serial: Write Jandy   packet To 0x00 of type              Ack | HEX: 0x10|0x02|0x00|0x01|0x51|0x00|0x64|0x10|0x03| 
Debug:   RS Serial: Read  Jandy   packet To 0xa1 of type   Unknown '0x59' | HEX: 0x10|0x02|0xa1|0x59|0x00|0x0c|0x10|0x03| 
Debug:   RS Serial: Write Jandy   packet To 0x00 of type              Ack | HEX: 0x10|0x02|0x00|0x01|0x59|0x00|0x6c|0x10|0x03| 
Debug:   RS Serial: Read  Jandy   packet To 0xa1 of type   Unknown '0x52' | HEX: 0x10|0x02|0xa1|0x52|0x00|0x05|0x10|0x03| 
Debug:   RS Serial: Write Jandy   packet To 0x00 of type              Ack | HEX: 0x10|0x02|0x00|0x01|0x52|0x00|0x65|0x10|0x03| 
Debug:   RS Serial: Read  Jandy   packet To 0xa1 of type     iAqalnk Poll | HEX: 0x10|0x02|0xa1|0x53|0x06|0x10|0x03| 

RS4 rev Yg
Notice: Serial Log:Read  Jandy   packet To 0xa3 of type            Probe | HEX: 0x10|0x02|0xa3|0x00|0xb5|0x10|0x03|
Notice: Serial Log:Read  Jandy   packet To 0x00 of type              Ack | HEX: 0x10|0x02|0x00|0x01|0x00|0x00|0x13|0x10|0x03|
Notice: Serial Log:Read  Jandy   packet To 0xa3 of type   Unknown '0x61' | HEX: 0x10|0x02|0xa3|0x61|0x00|0x00|0x00|0x04|0x00|0x27|0x41|0x10|0x03|
Notice: Serial Log:Read  Jandy   packet To 0x00 of type              Ack | HEX: 0x10|0x02|0x00|0x01|0x61|0x00|0x74|0x10|0x03|
Notice: Serial Log:Read  Jandy   packet To 0xa3 of type   Unknown '0x50' | HEX: 0x10|0x02|0xa3|0x50|0x20|0x20|0x20|0x20|0x20|0x20|0x20|0x20|0x20|0x00|0x25|0x10|0x03|
Notice: Serial Log:Read  Jandy   packet To 0x00 of type              Ack | HEX: 0x10|0x02|0x00|0x01|0x50|0x00|0x63|0x10|0x03|
Notice: Serial Log:Read  Jandy   packet To 0xa3 of type   Unknown '0x51' | HEX: 0x10|0x02|0xa3|0x51|0x00|0x06|0x10|0x03|
Notice: Serial Log:Read  Jandy   packet To 0x00 of type              Ack | HEX: 0x10|0x02|0x00|0x01|0x51|0x00|0x64|0x10|0x03|
Notice: Serial Log:Read  Jandy   packet To 0xa3 of type   Unknown '0x59' | HEX: 0x10|0x02|0xa3|0x59|0x00|0x0e|0x10|0x03|
Notice: Serial Log:Read  Jandy   packet To 0x00 of type              Ack | HEX: 0x10|0x02|0x00|0x01|0x59|0x00|0x6c|0x10|0x03|
Notice: Serial Log:Read  Jandy   packet To 0xa3 of type   Unknown '0x52' | HEX: 0x10|0x02|0xa3|0x52|0x00|0x07|0x10|0x03|
Notice: Serial Log:Read  Jandy   packet To 0x00 of type              Ack | HEX: 0x10|0x02|0x00|0x01|0x52|0x00|0x65|0x10|0x03|
Notice: Serial Log:Read  Jandy   packet To 0xa3 of type   Unknown '0x53' | HEX: 0x10|0x02|0xa3|0x53|0x08|0x10|0x03|
Notice: Serial Log:Read  Jandy   packet To 0x00 of type              Ack | HEX: 0x10|0x02|0x00|0x01|0x3f|0x00|0x52|0x10|0x03|

RS6 rev T2 RS8 (home)
Debug:   RS Serial: Read  Jandy   packet To 0xa1 of type            Probe | HEX: 0x10|0x02|0xa1|0x00|0xb3|0x10|0x03| 
Debug:   RS Serial: Write Jandy   packet To 0x00 of type              Ack | HEX: 0x10|0x02|0x00|0x01|0x00|0x00|0x13|0x10|0x03| 
Debug:   RS Serial: Read  Jandy   packet To 0xa1 of type   Unknown '0x61' | HEX: 0x10|0x02|0xa1|0x61|0x00|0x00|0x00|0x01|0x00|0x1d|0x32|0x10|0x03| 
Debug:   RS Serial: Write Jandy   packet To 0x00 of type              Ack | HEX: 0x10|0x02|0x00|0x01|0x61|0x00|0x74|0x10|0x03| 
Debug:   RS Serial: Read  Jandy   packet To 0xa1 of type   Unknown '0x50' | HEX: 0x10|0x02|0xa1|0x50|0x20|0x20|0x20|0x20|0x20|0x20|0x20|0x20|0x20|0x00|0x23|0x10|0x03| 
Debug:   RS Serial: Write Jandy   packet To 0x00 of type              Ack | HEX: 0x10|0x02|0x00|0x01|0x50|0x00|0x63|0x10|0x03| 
Debug:   RS Serial: Read  Jandy   packet To 0xa1 of type   Unknown '0x51' | HEX: 0x10|0x02|0xa1|0x51|0x31|0x42|0x41|0x36|0x32|0x38|0x32|0x35|0x42|0x37|0x43|0x36|0x39|0x41|0x34|0x43|0x00|0xa2|0x10|0x03| 
Debug:   RS Serial: Write Jandy   packet To 0x00 of type              Ack | HEX: 0x10|0x02|0x00|0x01|0x51|0x00|0x64|0x10|0x03| 
Debug:   RS Serial: Read  Jandy   packet To 0xa1 of type   Unknown '0x59' | HEX: 0x10|0x02|0xa1|0x59|0x01|0x0d|0x10|0x03| 
Debug:   RS Serial: Write Jandy   packet To 0x00 of type              Ack | HEX: 0x10|0x02|0x00|0x01|0x59|0x00|0x6c|0x10|0x03| 
Debug:   RS Serial: Read  Jandy   packet To 0xa1 of type   Unknown '0x52' | HEX: 0x10|0x02|0xa1|0x52|0x03|0x08|0x10|0x03| 
Debug:   RS Serial: Write Jandy   packet To 0x00 of type              Ack | HEX: 0x10|0x02|0x00|0x01|0x52|0x00|0x65|0x10|0x03| 
Debug:   RS Serial: Read  Jandy   packet To 0xa1 of type     iAqalnk Poll | HEX: 0x10|0x02|0xa1|0x53|0x06|0x10|0x03| 
*/
